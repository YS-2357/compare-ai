# 2025-12-24 개발 기록

## 로그 품질
- `app/ui/streamlit_app.py`: 기본 모델 선택 디버그 로그를 제거해 중복 출력 완화.
- `app/ui/streamlit_app.py`: 모델 선택/연결 상태/인증 섹션 로그를 세션당 1회만 출력.
- `app/services/chat_compare/nodes.py`, `app/services/chat_compare/summaries.py`: 반복 디버그 로그 제거.
- `app/services/prompt_compare/workflow.py`: 반복 디버그 로그 제거(모델 팩토리/프롬프트 빌더).

## 프롬프트
- `app/services/chat_compare/prompts.py`: 포맷 지시문 중괄호 이스케이프 처리로 템플릿 에러 방지.
- `app/services/prompt_compare/workflow.py`: 시스템 프롬프트 템플릿 중괄호 이스케이프 처리로 평가 파싱 오류 방지.

## 구조 정리
- `app/services/prompt_compare/schemas.py`: 평가 결과 스키마 분리.
- `app/services/prompt_compare/extractors.py`: 출처/메타 추출 유틸 분리.
- `app/services/prompt_compare/clients.py`: 모델 팩토리/기본 프롬프트/평가 모델 선택 분리.
- `app/services/prompt_compare/evaluator.py`: 평가 프롬프트 생성 및 점수 계산 분리.
- `app/services/prompt_compare/aggregator.py`: 점수 집계 로직 분리.

## 네이밍 통일
- `app/services/chat_graph` → `app/services/chat_compare`, `app/services/prompt_eval` → `app/services/prompt_compare`.
- `app/services/chat_compare/helpers.py` → `app/services/chat_compare/prompts.py`.
- `app/services/prompt_compare/runner.py` → `workflow.py`, `eval.py` → `evaluator.py`, `llm.py` → `clients.py`, `models.py` → `schemas.py`, `aggregate.py` → `aggregator.py`.
- `docs/prompt/chat_graph_system@1.0.0.md` → `docs/prompt/chat_compare_system@1.0.0.md`.
- `docs/prompt/prompt_eval_system@1.0.0.md` → `docs/prompt/prompt_compare_system@1.0.0.md`.
- `docs/prompt/prompt_eval_user@1.0.0.md` → `docs/prompt/prompt_compare_user@1.0.0.md`.
- `app/utils/config.py`: `prompt_chat_compare_version`, `prompt_compare_version` 키로 통일.
- `scripts/run_app.py` → `scripts/start_app.py`.

## 모듈 경로 확인
- `python3 -c "import main"` 실행 시 `jose` 모듈 누락으로 실패(venv 미사용 환경).
