# 2025-12-20 개발 기록

## 서비스 구조
- `services/chat_graph`로 리네임(구 langgraph), 프롬프트 평가 모듈을 `services/prompt_eval/runner.py`로 이동.
- `services/shared` 신설: 모델 최신/alias 매핑 공통화(`model_aliases.py`).

## 기능/성능
- 프롬프트 평가: 평가자 호출을 병렬 처리, 예외 시 -1 fallback으로 스트림 중단 없이 summary 반환.
- 모델 선택 옵션 확장: OpenAI/Gemini/Anthropic/Upstage/Perplexity/Mistral/Groq/Cohere 최신 목록 반영.
- `scripts/run_app.py` 내부 헬퍼를 네이밍 가이드에 맞춰 `_run_*`, `_ensure_*` 형태로 리네임.
- `chat_graph/helpers.py`에서 `_message_to_text` 잔여 호출을 `message_to_text`로 정리하여 스트림 실행 시 NameError 제거.
- Streamlit 평가 테이블 렌더링을 width API 변경(`width=\"stretch\"`)에 맞추고 `status` 컬럼을 문자열화하여 Arrow 변환/표시 오류를 해소.
- FastAPI Swagger 설명을 초급 개발자도 이해할 수 있게 보강(NDJSON, 토큰 인증, 엔드포인트 역할 안내)하고 `/api/prompt-eval` 등 주요 엔드포인트 설명을 상세화.
- 로깅 가이드 추가: `docs/guides/logger-guidelines.md`에 함수/작업 시작·종료, 값 변경, 예외 흐름 로깅 규칙과 체크리스트를 정리.
- 로깅 규칙 적용: API, chat_graph, prompt_eval, auth/rate_limit, Streamlit UI, run_app 스크립트에 한국어 시작/종료/예외 로그를 일괄 추가(노트북 제외).
- 설정/로거 모듈 이동: `app/utils/config.py`, `app/utils/logger.py`로 분리하고 전역 import 경로 갱신.
- 로그 파일 핸들러: 루트 `/logs/<날짜>.log` 위치에 일자별 파일 로그가 남도록 설정.
- 파일 로그 포맷은 ANSI 색상코드를 제거해 깨짐 없이 저장되도록 콘솔/파일 포맷터를 분리.

## 문서/가이드
- `docs/guides/naming-guidelines.md` 추가(네이밍/폴더/에러 처리/export 정책).
- docs 인덱스/Changelog/Dev log README 최신 날짜(12-20)로 갱신.

## 테스트/확인
- `python3 -m py_compile` 주요 변경 파일 확인: `app/ui/streamlit_app.py`, `app/services/prompt_eval/runner.py`, `app/services/__init__.py`, `app/api/routes.py`.
