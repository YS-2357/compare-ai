# Streamlit UI 가이드

> 목적: UI 상태/에러/모델 선택 흐름을 일관되게 유지한다.

## 핵심 요약
- **세션 일관성**: 세션 키는 고정된 네이밍으로 관리
- **에러 표시**: 표준 에러 포맷을 사용자 친화적으로 표시
- **모델 선택 흐름**: UI 선택 → API 요청 → 서비스 override 반영

## 세션/상태
- 세션 키는 기능 단위로 고정한다(예: `chat_log`, `prompt_eval_log`).
- 스트림 중단/재시도 시 세션을 초기화하거나 상태 플래그로 구분한다.

## 에러 표시
- API 에러는 사용자 메시지와 디버그 메시지를 분리한다.
- `error_code`는 사용자 메시지에 직접 노출하지 않는다.

## 모델 선택
- 사이드바 선택값은 요청 payload에 포함한다.
- 서버에서 `model_overrides`를 우선 적용한다.

## 스트림 처리
- `partial/summary/error` 이벤트를 타입별로 분기해 처리한다.
- `summary`에서만 최종 표/평균 점수를 확정한다.

## 예시

### 세션 키
```
chat_log
prompt_eval_log
active_models
```

### 에러 표시
```
사용자 메시지: "요청 처리에 실패했습니다. 잠시 후 다시 시도해 주세요."
디버그 메시지: "UPSTREAM_TIMEOUT: timeout"
```
