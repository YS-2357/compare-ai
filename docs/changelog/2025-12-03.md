# 2025-12-03 변경 로그

## 변경 사항
- Streamlit 스트리밍 UX 개선: 모델별 partial/에러를 도착 순서대로 바로 표시(이모지+소요 시간), summary 수신 시 `chat_log` 확정 저장.
- Upstash 필수 사용(폴백 제거) 및 `/usage` 조회 API 추가: 로그인 직후 실제 남은 횟수 표기, 0회 시 UI에서 경고 표시.
- 프롬프트 영어화: 질문/요약 지시문을 영어로 통일하고 응답/요약은 한국어로만 하도록 명시.
- 요약 리팩터: 요약 프롬프트·파서를 `summaries.py`로 통합, 기존 `app/prompts/*`, `app/parsers/*` 사용처 제거.
- Perplexity 출처 보강: `citations/search_results/sources` 메타에서 URL을 폭넓게 파싱해 숫자 인용 대신 링크가 노출되도록 개선.
- 관리자 URL 입력 비활성화: UI에서 FastAPI URL을 수정할 수 없도록 잠그고, 환경변수/파일로만 설정.

## 테스트
- `python3 -m compileall app/ui/streamlit_app.py app/services/langgraph/helpers.py app/services/langgraph/nodes.py app/services/langgraph/summaries.py`
